<!DOCTYPE html>
<html lang="en">
  <head> </head>
  <body>
    <p id="title">Level 3</p>
    <p id="output"></p>
    <script>
      const level3 = window.document.getElementById("title");
      const level2 = window.parent.document.getElementById("title");
      const level1 = window.parent.parent.document.getElementById("title");
      const root = window.parent.parent.parent.document.getElementById("title");

      let levelTop;
      try {
        levelTop = window.top.document.getElementById("title");
      } catch (err) {
        console.log("Level 3 cannot access top property on window");
      }

      level3.setAttribute("style", "background-color: red");

      const outputText = [
        level3.innerText,
        level2.innerText,
        level1.innerText,
        root.innerText,
        levelTop?.innerText
      ].join(", ");

      const o = window.document.getElementById("output");
      o.innerText = outputText;
    </script>
  </body>
</html>
